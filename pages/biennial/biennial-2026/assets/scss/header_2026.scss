// Reusable compact minimal-nav state (mobile)
@mixin minimal-nav-compact {
    right: 1rem;
    left: auto;
    width: auto;
    transform: scale(0.3);
    transform-origin: right bottom;
    bottom: 2rem;

    .minimal-nav {
        transform-origin: right bottom;
        gap: 2rem;
    }

    ul li a {
        opacity: 1;
        color: var(--color-pink);
    }
}

#main-header {
    position: fixed;
    bottom: 1rem;

    z-index: 50000;
    text-align: center;

    width: auto;

    right: 1rem;

    transform-origin: right bottom;
    transition: transform 0.3s ease;

    @include mobile {
        width: 78vw;
        top: auto;
        bottom: var(--mobile-nav-bottom, 1rem);

        right: auto;
        height: 12.5rem;

        body.menu-small & {
            @include minimal-nav-compact;

            * {
                pointer-events: none;
            }

            .minimal-nav__overlay {
                pointer-events: auto;
            }
        }

        body.menu-expanded & {
            transform: scale(1);
            left: 23vw;
            bottom: var(--mobile-nav-bottom, 1rem);

            * {
                pointer-events: none;
            }

            .minimal-nav__overlay {
                pointer-events: auto;
            }
        }

        body.menu-expanded.menu-links-ready & {
            * {
                pointer-events: auto;
            }
        }


        .minimal-nav {
            position: relative;
        }

        .minimal-nav__overlay {
            position: absolute;
            inset: -1rem;
            width: calc(100% + 2rem);
            height: calc(100% + 2rem);
            z-index: 9999;
            border: 2px solid transparent;
            pointer-events: auto;
            background: transparent;
            touch-action: manipulation;
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        body.menu-expanded & .minimal-nav__overlay {
            pointer-events: none;
        }

        .minimal-nav__overlay--active {
            transform: scale(1.2);
            pointer-events: none;
        }

        // Mobile behaviour: keep small until menu is expanded
        transform-origin: right bottom;
        @include minimal-nav-compact;
        transition: all 0.3s ease;

        * {
            transition: all 0.3s ease;
        }

        .minimal-nav {
            display: flex;
            flex-direction: column;
            gap: 0.1rem;
            transform-origin: right bottom;
        }

        ul {
            gap: 0;

            li {
                a {
                    opacity: 1;
                    color: var(--color-brown);
                }
            }
        }

        body.menu-expanded & {
            transform: scale(1);
            top: calc(100dvh - 9rem);

            .minimal-nav {
                gap: 0.1rem;
            }

            ul {
                gap: 0.2rem;
                font-size: 1rem;

                li {
                    a {
                        opacity: 1;
                        color: var(--color-brown);
                    }
                }
            }
        }

        // Home page: keep nav full-size and readable on mobile
        body.slug-home & {
            transform: scale(1);

            left: 11vw; // center ~78vw width on mobile
            right: auto;
            width: 78vw;
            bottom: 1rem;
            height: 9rem;

            .minimal-nav__overlay {
                display: none;
            }

            .minimal-nav {
                gap: 0.1rem;
            }

            ul li a {
                opacity: 1;
                color: var(--color-brown);
            }
        }

        body.slug-home.has-scrolled & {
            @include minimal-nav-compact;

            .minimal-nav__overlay {
                display: block;
            }
        }

        body.slug-home.has-scrolled.menu-expanded & {
            transform: scale(1);
            left: 11vw;
            right: auto;
            width: 78vw;

            .minimal-nav {
                gap: 0.1rem;
            }

            ul li a {
                opacity: 1;
                color: var(--color-brown);
            }
        }

        &.click--active {
            transform: scale(1);

            .minimal-nav {
                gap: 0.1rem;
            }

            ul {
                gap: 0.2rem;
                font-size: 1rem;

                li {
                    a {
                        opacity: 1;
                        color: var(--color-brown);
                    }
                }
            }
        }
    }


    @include desktop {
        body.slug-home & {
            right: calc(50vw - 13rem);
        }
    }

    font-size: 1.5rem;
    letter-spacing: -0.00rem;

    a:link,
    a:visited {
        text-decoration: none;
        cursor: pointer;
        //display: inline-block;
        color: var(--color-brown);
        transition: 0.2s all ease;
    }

    ul {
        margin: 0 0 0.2rem 0;
        padding: 0;
        display: flex;
        flex-direction: row;
        align-items: center;
        justify-content: center;
        gap: 0.2rem;

        li {
            margin: 0;
            padding: 0;
            display: inline-block;
            background: var(--color-pink);
            padding: 0.2rem 0.3rem 0.1rem 0.3rem;
            border-radius: 0.2rem;
            transition: background 0.3s ease;

            @include headline-h3;

            &:hover {
                background: var(--color-blue);

            }
        }
    }
}
